<h1>Generate schedule</h1>
<div id="schedule-params">
    <div>
        <label>
            Time step in minutes:
            <mat-icon
                matTooltip="This parameter sets time accuracy at which events might be arranged. It is recommended to set it to at least 15 minutes.
            The lower the number, the more schedules the algorithm might generate and therefore it may take much longer. When set to 5 minutes your computer might get hot :)">
                help</mat-icon>
        </label>
        <input type="number" min="5" class="form-control" pattern="[1-9][0-9]*"
            [(ngModel)]="scheduleParameters.timeStep" #timeStep="ngModel">
        <div *ngIf="!timeStep.value && (timeStep.dirty || timeStep.touched)" class="alert alert-danger">
            Value is required
        </div>
        <div *ngIf="timeStep.invalid && (timeStep.dirty || timeStep.touched)" class="alert alert-danger">
            Value must be a number, at least 5
        </div>
        <div *ngIf="timeStep.value < 5 && (timeStep.dirty || timeStep.touched)" class="alert alert-danger">
            Value must be at least 5
        </div>
    </div>

    <div>
        <label>
            Number of rooms:
            <mat-icon
                matTooltip="If this parameter is set to a certain number, the algrithm might arrange events to occur simultaneously according to number of rooms.">
                help</mat-icon>
        </label>
        <input class="form-control" pattern="[1-9][0-9]*" [(ngModel)]="scheduleParameters.numberOfRooms"
            #numberOfRooms="ngModel">
        <div *ngIf="!numberOfRooms.value && (numberOfRooms.dirty || numberOfRooms.touched)" class="alert alert-danger">
            Value is required
        </div>
        <div *ngIf="numberOfRooms.invalid && (numberOfRooms.dirty || numberOfRooms.touched)" class="alert alert-danger">
            Value must be a number
        </div>
    </div>

    <div>
        <label>
            Max number of results:
            <mat-icon matTooltip="The maximum number of schedules that can be generated by algorithm.">
                help</mat-icon>
        </label>
        <input type="number" max="10000" min="1" class="form-control" pattern="[1-9][0-9]*"
            [(ngModel)]="scheduleParameters.maxNumberOfResults" #maxResults="ngModel">
        <div *ngIf="!maxResults.value && (maxResults.dirty || maxResults.touched)" class="alert alert-danger">
            Value is required
        </div>
        <div *ngIf="maxResults.invalid && (maxResults.dirty || maxResults.touched)" class="alert alert-danger">
            Value must be a number
        </div>
        <div *ngIf="(maxResults.value > 10000 || maxResults.value < 1) && (maxResults.dirty || maxResults.touched)"
            class="alert alert-danger">
            Value must be in range 1 - 10000
        </div>
    </div>

    <div>
        <label>
            Use limited timeframes:
        </label>
        <mat-checkbox color="primary" (change)="toggleLimitedTimeFrames()"
            [(ngModel)]="scheduleParameters.useLimitedTimeFrames">
        </mat-checkbox>
        <mat-icon matTooltip="You can limit generated schedule to certain timeframes.">help</mat-icon>
    </div>
</div>

<button class="btn btn-primary" [disabled]="generateButtonDisabled()" (click)="generateSchedule()">Generate
    schedule</button>

<mat-spinner *ngIf="loading"></mat-spinner>

<div *ngIf="scheduleParameters.useLimitedTimeFrames" class="calendar-container">
    <h5>Drag and drop to add time frames:</h5>
    <app-dates-input (addTimeFrameEvent)="receiveAddTimeFrameEvent($event)"></app-dates-input>
</div>